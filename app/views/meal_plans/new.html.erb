<div class="mealplan_new">

  <div class="mealplan_new_title d-flex flex-column align-items-center p-4 text-center">
    <h1>Bonjour
      <% if user_signed_in?  %>
        <%= current_user.email.split("@").first.capitalize %>
      <% end %>
      !
    </h1>
    <h2>Planifie tes repas de la semaine en 3 clics...</h2>
  </div>

  <div class="mealplan_form">
    <%= form_with model: @meal_plan do |f| %>

      <div class="mealplan_form_input" data-controller="change-qty" data-change-qty-max-value="<%= MealPlan::MAX_NB_MEAL %>" >
        <%=  %>
        <%= f.label :nb_meals, "Combien de repas voulez-vous planifier ?", class: "mealplan_form_label" %>
        <%= f.hidden_field :nb_meals, data: { "change-qty-target": "nbInput" }, value: 5 %>
        <div class="mealplan_form_nb">
          <i
            class="my-icon-minus-wo-circle mealplan_form_nb_icons"
            data-action="click->change-qty#decrease">
          </i>
          <p
            class="mealplan_form_nb_qty"
            data-change-qty-target="nbQty">
            5
          </p>
          <i
            class="my-icon-plus-wo-circle mealplan_form_nb_icons"
            data-action="click->change-qty#increase">
          </i>
        </div>
      </div>

      <div class="mealplan_form_input" data-controller="change-qty" data-change-qty-max-value="<%= Meal::MAX_NB_PEOPLE %>" >
        <%= f.label :nb_people, "Combien serez-vous à table ?", class: "mealplan_form_label" %>
        <%= f.hidden_field :nb_people, data: { "change-qty-target": "nbInput" }, value: 2  %>
        <div class="mealplan_form_nb">
          <i
            class="my-icon-minus-wo-circle mealplan_form_nb_icons"
            data-action="click->change-qty#decrease">
          </i>
          <p
            class="mealplan_form_nb_qty"
            data-change-qty-target="nbQty">
            2
          </p>
          <i
            class="my-icon-plus-wo-circle mealplan_form_nb_icons"
            data-action="click->change-qty#increase">
          </i>
        </div>
      </div>

      <div class="mealplan_form_input mealplan_form_diets d-flex flex-column">
        <p class="mealplan_form_label">Avez-vous un régime particulier ?</p>
        <% Diet.order(:name).each do |diet| %>
          <div>
            <label for="<%= diet.id %>"><%= diet.name.capitalize %></label>
            <input type="checkbox" name="diets[]" id="<%= diet.id %>" value="<%= diet.id %>">
          </div>
        <% end %>
      </div>

      <a class="my-icon-gluten" href="#">
        <svg xmlns="http://www.w3.org/2000/svg" width="128" height="128" viewBox="0 0 48 48">
          <path fill-rule="evenodd" d="M36.001 37.416A17.93 17.93 0 0 1 24 42c-9.941 0-18-8.059-18-18c0-4.738 1.83-9.048 4.823-12.263l2.97 2.97a1 1 0 0 0 1.414-1.414l-2.942-2.942A17.93 17.93 0 0 1 24 6c9.941 0 18 8.059 18 18c0 4.61-1.734 8.817-4.584 12.001l-5.794-5.793a7 7 0 0 0 .378-2.27V26a1 1 0 0 0-.724-.961a7 7 0 0 0 .724-3.1V20a1 1 0 0 0-1.417-.909l-.06.027A7 7 0 0 0 31 16.58V15a1 1 0 0 0-1.356-.934l-2.136.813a7 7 0 0 0-.25.1a7.77 7.77 0 0 0-1.868-4.893l-.63-.737a1 1 0 0 0-1.52 0l-.63.736a7.77 7.77 0 0 0-1.869 4.895a7 7 0 0 0-.249-.1l-2.136-.815A1 1 0 0 0 17 15v1.58c0 .886.167 1.744.476 2.538l-.059-.027A1 1 0 0 0 16 20v1.939a7 7 0 0 0 .724 3.1A1 1 0 0 0 16 26v1.939a7 7 0 0 0 4.079 6.36L23 35.642V38h2v-2.359l2.921-1.341a7 7 0 0 0 2.732-2.233zM44 24c0 11.046-8.954 20-20 20S4 35.046 4 24S12.954 4 24 4s20 8.954 20 20M24 11.542a5.77 5.77 0 0 1 1.121 4.859c-.434.422-.81.897-1.121 1.414a7 7 0 0 0-1.121-1.414A5.77 5.77 0 0 1 24 11.542m-1 10.007v-.128a5 5 0 0 0-3.22-4.673l-.78-.297v.128a5 5 0 0 0 3.22 4.673zm2 0l.78-.297A5 5 0 0 0 29 16.579v-.128l-.78.297A5 5 0 0 0 25 21.421zm0 4.558c0-1.372.8-2.619 2.046-3.191L30 21.56v.379a5 5 0 0 1-2.913 4.543L25 27.44zm-4.913-3.59A5 5 0 0 1 23 27.062v.38l-2.087-.959A5 5 0 0 1 18 21.94v-.38zM23 33.44v-.378a5 5 0 0 0-2.913-4.544L18 27.56v.379a5 5 0 0 0 2.913 4.543zm2 0l2.087-.958A5 5 0 0 0 30 27.94v-.38l-2.954 1.357A3.51 3.51 0 0 0 25 32.107z" clip-rule="evenodd"/>
        </svg>
      </a>

      <div class="mealplan_form_button">
        <%= f.submit "GO !", class: "button-go-search-form" %>
      </div>

    <% end %>
  </div>
  <%= render "shared/bottom_navbar" %>
</div>
